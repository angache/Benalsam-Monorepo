import{j as e}from"./query-tMv1bFhv.js";import{u as h,r as x}from"./router-Bq68dJ36.js";import{d as j,B as n,t as c}from"./auth-Dm-7ngQy.js";import{S as y,F as b,G as v,H as N,J as w,aI as k,aJ as C}from"./listings-CDgdt6vp.js";import{m as S,a as E,L as F,b4 as B}from"./ui-YP8xOIYG.js";import"./vendor-Bs7gn1Hv.js";import"./images-C3EucWOq.js";import"./supabase-D6FkHI3a.js";const K=()=>{const o=h(),{currentUser:p}=j(),[a,d]=x.useState(""),[l,m]=x.useState(!1),f=async()=>{if(!a){c({title:"Hata",description:"Lütfen bir kategori seçin.",variant:"destructive"});return}m(!0);const s=await k(p.id,a);s&&!s.already_following?(c({title:"Başarılı",description:`"${a}" kategorisi takip edildi.`}),o(-1)):s?.already_following&&c({title:"Bilgi",description:`"${a}" kategorisini zaten takip ediyorsunuz.`}),m(!1),d("")},u=(s,g="")=>{let i=[];return s.forEach(t=>{const r=g?`${g} > ${t.name}`:t.name;i.push(e.jsx(w,{value:r,children:r},r)),t.subcategories&&t.subcategories.length>0&&(i=i.concat(u(t.subcategories,r)))}),i};return e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-lg mx-auto px-4 py-12",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>o(-1),className:"mr-4 text-muted-foreground hover:text-foreground",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-2xl font-bold text-gradient",children:"Kategori Takip Et"})]}),e.jsxs("div",{className:"glass-effect rounded-2xl p-6 space-y-6",children:[e.jsx("p",{className:"text-muted-foreground",children:"Yeni ilanlardan haberdar olmak için bir kategori seçin ve takibe alın."}),e.jsx("div",{className:"space-y-4",children:e.jsxs(y,{value:a,onValueChange:d,children:[e.jsx(b,{className:"w-full bg-input border-border",children:e.jsx(v,{placeholder:"Kategori Seçin"})}),e.jsx(N,{children:u(C)})]})}),e.jsxs("div",{className:"flex gap-4 pt-3",children:[e.jsx(n,{variant:"outline",onClick:()=>o(-1),disabled:l,className:"flex-1",children:"İptal"}),e.jsxs(n,{onClick:f,disabled:l||!a,className:"flex-1 btn-primary",children:[l?e.jsx(F,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(B,{className:"w-4 h-4 mr-2"}),"Takip Et"]})]})]})]})};export{K as default};
