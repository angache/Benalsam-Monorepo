import{j as e}from"./query-tMv1bFhv.js";import{r as d}from"./router-Bq68dJ36.js";import{d as v,B as c,s as k,t as f}from"./auth-Dm-7ngQy.js";import{aL as y,bJ as N}from"./listings-BkJHjkUV.js";import{ba as C,M as B,r as S,bb as A,b6 as E}from"./ui-YP8xOIYG.js";import"./vendor-Bs7gn1Hv.js";import"./images-C3EucWOq.js";import"./supabase-D6FkHI3a.js";const m={new_offer_email:!0,new_offer_push:!0,new_message_email:!0,new_message_push:!0,review_notifications_email:!0,review_notifications_push:!0,summary_emails:"weekly"},K=()=>{const{currentUser:l,setCurrentUser:u}=v(),[r,o]=d.useState(m),[h,p]=d.useState(!0);d.useEffect(()=>{l&&l.notification_preferences?o(s=>({...m,...l.notification_preferences})):l&&o(m),p(!1)},[l]);const t=s=>{o(i=>({...i,[s]:!i[s]}))},b=(s,i)=>{o(a=>({...a,[s]:i}))},x=()=>{const s=Object.keys(r).reduce((i,a)=>(typeof r[a]=="boolean"?i[a]=!1:i[a]=r[a],i),{});o(s)},_=async()=>{if(!l)return;const{data:s,error:i}=await k.from("profiles").update({notification_preferences:r}).eq("id",l.id).select().single();i?f({title:"Güncelleme Hatası",description:i.message,variant:"destructive"}):s&&(u(a=>({...a,...s})),f({title:"Bildirim Ayarları Güncellendi",description:"Değişiklikler başarıyla kaydedildi."}))};if(h)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary"})});const n=({id:s,label:i,subLabel:a,checked:g,onCheckedChange:w,type:j="switch"})=>e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/50 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:s,className:"text-base font-medium",children:i}),a&&e.jsx("p",{className:"text-xs text-muted-foreground",children:a})]}),j==="switch"&&e.jsx(N,{id:s,checked:g,onCheckedChange:w})]});return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"p-6 border border-border rounded-lg glass-effect",children:[e.jsxs("h3",{className:"text-lg font-medium mb-1 flex items-center",children:[e.jsx(C,{className:"w-5 h-5 mr-2 text-primary"})," Yeni Teklif Bildirimleri"]}),e.jsx(n,{id:"new_offer_email",label:"E-posta ile Bildir",checked:r.new_offer_email,onCheckedChange:()=>t("new_offer_email")}),e.jsx(n,{id:"new_offer_push",label:"Anlık Bildirim (Push)",subLabel:"Mobil uygulama veya tarayıcı bildirimi",checked:r.new_offer_push,onCheckedChange:()=>t("new_offer_push")})]}),e.jsxs("div",{className:"p-6 border border-border rounded-lg glass-effect",children:[e.jsxs("h3",{className:"text-lg font-medium mb-1 flex items-center",children:[e.jsx(B,{className:"w-5 h-5 mr-2 text-primary"})," Mesaj Bildirimleri"]}),e.jsx(n,{id:"new_message_email",label:"E-posta ile Bildir",checked:r.new_message_email,onCheckedChange:()=>t("new_message_email")}),e.jsx(n,{id:"new_message_push",label:"Anlık Bildirim (Push)",checked:r.new_message_push,onCheckedChange:()=>t("new_message_push")})]}),e.jsxs("div",{className:"p-6 border border-border rounded-lg glass-effect",children:[e.jsxs("h3",{className:"text-lg font-medium mb-1 flex items-center",children:[e.jsx(S,{className:"w-5 h-5 mr-2 text-primary"})," Yorum ve Değerlendirme Bildirimleri"]}),e.jsx(n,{id:"review_notifications_email",label:"E-posta ile Bildir",checked:r.review_notifications_email,onCheckedChange:()=>t("review_notifications_email")}),e.jsx(n,{id:"review_notifications_push",label:"Anlık Bildirim (Push)",checked:r.review_notifications_push,onCheckedChange:()=>t("review_notifications_push")})]}),e.jsxs("div",{className:"p-6 border border-border rounded-lg glass-effect",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Özet E-postaları"}),e.jsxs("select",{id:"summary_emails",value:r.summary_emails,onChange:s=>b("summary_emails",s.target.value),className:"w-full p-2 border border-input rounded-md bg-background focus:ring-primary focus:border-primary",children:[e.jsx("option",{value:"daily",children:"Günlük"}),e.jsx("option",{value:"weekly",children:"Haftalık"}),e.jsx("option",{value:"monthly",children:"Aylık"}),e.jsx("option",{value:"never",children:"Hiçbir Zaman"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mt-8 pt-6 border-t border-border/50",children:[e.jsxs(c,{variant:"outline",onClick:x,className:"w-full sm:w-auto",children:[e.jsx(A,{className:"w-4 h-4 mr-2"})," Tüm Bildirimleri Kapat"]}),e.jsxs(c,{onClick:_,className:"btn-primary w-full sm:w-auto",children:[e.jsx(E,{className:"w-4 h-4 mr-2"})," Değişiklikleri Kaydet"]})]})]})};export{K as default};
