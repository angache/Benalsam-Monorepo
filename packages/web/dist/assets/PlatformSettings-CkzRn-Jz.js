import{j as e}from"./query-tMv1bFhv.js";import{r as i,R as S}from"./router-Bq68dJ36.js";import{e as C,B as D,s as T,t as v}from"./auth-CRgK8rPx.js";import{bu as p,S as c,w as o,x as d,y as m,z as a,ay as P}from"./listings-BLmNnY3e.js";import{T as V}from"./profile-Dy5Fyuz5.js";import{O as E,ab as Y,e as L,D as R,bc as A,b6 as K}from"./ui-DwxUvrnm.js";import"./vendor-Bs7gn1Hv.js";import"./supabase-D6FkHI3a.js";const n="none",j={default_category:null,default_location_province:null,default_location_district:null,currency:"TRY",language:"tr"},z=()=>{const{currentUser:t,setCurrentUser:b}=C(),{theme:N,toggleTheme:_}=i.useContext(V),[l,h]=i.useState(j),[g,f]=i.useState([]),[y,k]=i.useState(!0);i.useEffect(()=>{if(t&&t.platform_preferences){const s={...j,...t.platform_preferences};if(h(s),s.default_location_province){const r=p.find(x=>x.name===s.default_location_province);f(r?.districts||[])}}else t&&h(j);k(!1)},[t]),i.useEffect(()=>{if(l.default_location_province){const s=p.find(r=>r.name===l.default_location_province);f(s?.districts||[])}else f([]),h(s=>({...s,default_location_district:null}))},[l.default_location_province]);const u=(s,r)=>{h(x=>({...x,[s]:r===n?null:r}))},w=async()=>{if(!t)return;const{data:s,error:r}=await T.from("profiles").update({platform_preferences:l}).eq("id",t.id).select().single();r?v({title:"Güncelleme Hatası",description:r.message,variant:"destructive"}):s&&(b(x=>({...x,...s})),v({title:"Platform Tercihleri Güncellendi",description:"Değişiklikler başarıyla kaydedildi."}))};return y?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"p-6 border border-border rounded-lg glass-effect",children:[e.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center",children:[e.jsx(E,{className:"w-5 h-5 mr-2 text-primary"})," Tema Seçimi"]}),e.jsxs(c,{value:N,onValueChange:_,children:[e.jsx(o,{className:"w-full sm:w-1/2",children:e.jsx(d,{placeholder:"Tema seçin"})}),e.jsxs(m,{className:"dropdown-content",children:[e.jsx(a,{value:"light",children:"Açık Mod"}),e.jsx(a,{value:"dark",children:"Karanlık Mod"})]})]})]}),e.jsxs("div",{className:"p-6 border border-border rounded-lg glass-effect",children:[e.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center",children:[e.jsx(Y,{className:"w-5 h-5 mr-2 text-primary"})," Varsayılan Kategori"]}),e.jsxs(c,{value:l.default_category||n,onValueChange:s=>u("default_category",s),children:[e.jsx(o,{className:"w-full sm:w-1/2",children:e.jsx(d,{placeholder:"Varsayılan kategori seçin..."})}),e.jsxs(m,{className:"dropdown-content max-h-60 overflow-y-auto",children:[e.jsx(a,{value:n,children:"Kategori Yok"}),P.map(s=>e.jsxs(S.Fragment,{children:[e.jsx(a,{value:s.name,className:"font-semibold",children:s.name}),s.subcategories.map(r=>e.jsx(a,{value:`${s.name} > ${r.name}`,className:"pl-8",children:r.name},`${s.name} > ${r.name}`))]},s.name))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Yeni ilan oluştururken bu kategori otomatik seçilir."})]}),e.jsxs("div",{className:"p-6 border border-border rounded-lg glass-effect",children:[e.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center",children:[e.jsx(L,{className:"w-5 h-5 mr-2 text-primary"})," Varsayılan Konum"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(c,{value:l.default_location_province||n,onValueChange:s=>u("default_location_province",s),children:[e.jsx(o,{children:e.jsx(d,{placeholder:"İl Seçin"})}),e.jsxs(m,{className:"dropdown-content",children:[e.jsx(a,{value:n,children:"İl Yok"}),p.map(s=>e.jsx(a,{value:s.name,children:s.name},s.name))]})]}),l.default_location_province&&g.length>0&&e.jsxs(c,{value:l.default_location_district||n,onValueChange:s=>u("default_location_district",s),children:[e.jsx(o,{children:e.jsx(d,{placeholder:"İlçe Seçin"})}),e.jsxs(m,{className:"dropdown-content",children:[e.jsx(a,{value:n,children:"İlçe Yok"}),g.map(s=>e.jsx(a,{value:s,children:s},s))]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Yeni ilan oluştururken bu konum otomatik seçilir."})]}),e.jsxs("div",{className:"p-6 border border-border rounded-lg glass-effect",children:[e.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center",children:[e.jsx(R,{className:"w-5 h-5 mr-2 text-primary"})," Para Birimi"]}),e.jsxs(c,{value:l.currency,onValueChange:s=>u("currency",s),children:[e.jsx(o,{className:"w-full sm:w-1/2",children:e.jsx(d,{placeholder:"Para birimi seçin"})}),e.jsxs(m,{className:"dropdown-content",children:[e.jsx(a,{value:"TRY",children:"Türk Lirası (₺)"}),e.jsx(a,{value:"USD",children:"ABD Doları ($)"}),e.jsx(a,{value:"EUR",children:"Euro (€)"})]})]})]}),e.jsxs("div",{className:"p-6 border border-border rounded-lg glass-effect",children:[e.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center",children:[e.jsx(A,{className:"w-5 h-5 mr-2 text-primary"})," Dil"]}),e.jsxs(c,{value:l.language,onValueChange:s=>u("language",s),children:[e.jsx(o,{className:"w-full sm:w-1/2",children:e.jsx(d,{placeholder:"Dil seçin"})}),e.jsxs(m,{className:"dropdown-content",children:[e.jsx(a,{value:"tr",children:"Türkçe"}),e.jsx(a,{value:"en",disabled:!0,children:"English (Yakında)"})]})]})]}),e.jsx("div",{className:"flex justify-end mt-8 pt-6 border-t border-border/50",children:e.jsxs(D,{onClick:w,className:"btn-primary",children:[e.jsx(K,{className:"w-4 h-4 mr-2"})," Değişiklikleri Kaydet"]})})]})};export{z as default};
