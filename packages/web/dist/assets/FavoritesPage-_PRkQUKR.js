import{j as e}from"./query-tMv1bFhv.js";import{r as n,L as v}from"./router-Bq68dJ36.js";import{d as g,B as j,t as y}from"./auth-Dm-7ngQy.js";import{L as b,aE as N}from"./listings-CDgdt6vp.js";import{L as k,b3 as x,m as u,A as F}from"./ui-YP8xOIYG.js";import"./vendor-Bs7gn1Hv.js";import"./images-C3EucWOq.js";import"./supabase-D6FkHI3a.js";const C=({onToggleFavorite:f})=>{const{currentUser:i}=g(),[o,l]=n.useState([]),[p,c]=n.useState(!0),[d,m]=n.useState(null);n.useEffect(()=>{if(!i)return;(async()=>{c(!0),m(null);try{const t=await N(i.id);l(t.map(s=>({...s,is_favorited:!0})))}catch(t){console.error("Error in FavoritesPage useEffect:",t),m("Favori ilanlar yüklenirken bir sorun oluştu."),y({title:"Hata",description:"Favori ilanlar yüklenemedi.",variant:"destructive"})}finally{c(!1)}})()},[i]);const h=(r,t)=>{l(s=>t?s.map(a=>a.id===r?{...a,is_favorited:!0,favorites_count:(a.favorites_count||0)+1}:a):s.filter(a=>a.id!==r)),f(r,t)};return p?e.jsx("div",{className:"min-h-[calc(100vh-160px)] flex items-center justify-center bg-background",children:e.jsx(k,{className:"h-16 w-16 animate-spin text-primary"})}):d?e.jsxs("div",{className:"min-h-[calc(100vh-160px)] flex flex-col items-center justify-center text-center px-4 bg-background",children:[e.jsx(x,{className:"w-20 h-20 text-destructive mb-6"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"Bir Sorun Oluştu"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-md",children:d})]}):o.length===0?e.jsxs("div",{className:"min-h-[calc(100vh-160px)] flex flex-col items-center justify-center text-center px-4 bg-background",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(x,{className:"w-12 h-12 text-primary"})}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"Henüz Favori İlanınız Yok"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-md",children:"Beğendiğiniz ilanları favorilerinize ekleyerek buradan kolayca takip edebilirsiniz."}),e.jsx(j,{asChild:!0,className:"btn-primary text-primary-foreground",children:e.jsx(v,{to:"/",children:"İlanlara Göz At"})})]}):e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gradient mb-4",children:"Favori İlanlarım"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Beğendiğiniz ve takip etmek istediğiniz ilanlar burada."})]}),e.jsx(F,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((r,t)=>e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,delay:t*.05},children:e.jsx(b,{listing:r,onToggleFavorite:h,currentUser:i,isFavoritedOverride:!0})},r.id))})})]})};export{C as default};
