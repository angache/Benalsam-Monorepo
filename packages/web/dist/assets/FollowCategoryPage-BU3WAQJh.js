import{j as e}from"./query-tMv1bFhv.js";import{u as h,r as g}from"./router-Bq68dJ36.js";import{e as y,B as n,t as c}from"./auth-CRgK8rPx.js";import{S as j,w as b,x as v,y as w,z as N,ay as k}from"./listings-BLmNnY3e.js";import{f as C}from"./categoryFollowService-rO2HIId5.js";import{m as S,A as E,Y as z,b4 as B}from"./ui-DwxUvrnm.js";import"./vendor-Bs7gn1Hv.js";import"./supabase-D6FkHI3a.js";const V=()=>{const o=h(),{currentUser:p}=y(),[a,d]=g.useState(""),[l,m]=g.useState(!1),f=async()=>{if(!a){c({title:"Hata",description:"Lütfen bir kategori seçin.",variant:"destructive"});return}m(!0);const s=await C(p.id,a);s&&!s.already_following?(c({title:"Başarılı",description:`"${a}" kategorisi takip edildi.`}),o(-1)):s?.already_following&&c({title:"Bilgi",description:`"${a}" kategorisini zaten takip ediyorsunuz.`}),m(!1),d("")},u=(s,x="")=>{let i=[];return s.forEach(t=>{const r=x?`${x} > ${t.name}`:t.name;i.push(e.jsx(N,{value:r,children:r},r)),t.subcategories&&t.subcategories.length>0&&(i=i.concat(u(t.subcategories,r)))}),i};return e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-lg mx-auto px-4 py-12",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>o(-1),className:"mr-4 text-muted-foreground hover:text-foreground",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-2xl font-bold text-gradient",children:"Kategori Takip Et"})]}),e.jsxs("div",{className:"glass-effect rounded-2xl p-6 space-y-6",children:[e.jsx("p",{className:"text-muted-foreground",children:"Yeni ilanlardan haberdar olmak için bir kategori seçin ve takibe alın."}),e.jsx("div",{className:"space-y-4",children:e.jsxs(j,{value:a,onValueChange:d,children:[e.jsx(b,{className:"w-full bg-input border-border",children:e.jsx(v,{placeholder:"Kategori Seçin"})}),e.jsx(w,{children:u(k)})]})}),e.jsxs("div",{className:"flex gap-4 pt-3",children:[e.jsx(n,{variant:"outline",onClick:()=>o(-1),disabled:l,className:"flex-1",children:"İptal"}),e.jsxs(n,{onClick:f,disabled:l||!a,className:"flex-1 btn-primary",children:[l?e.jsx(z,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(B,{className:"w-4 h-4 mr-2"}),"Takip Et"]})]})]})]})};export{V as default};
