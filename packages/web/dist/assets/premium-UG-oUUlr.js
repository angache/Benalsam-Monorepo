import{j as e}from"./query-tMv1bFhv.js";import{u as ne,r as d,R as U,d as Oe}from"./router-Bq68dJ36.js";import{d as H,B as T,t as z,s as J}from"./auth-Dm-7ngQy.js";import{a6 as Ee,_ as ce,a7 as oe,Q as P,B as D,U as _,w as de,a8 as A,a9 as Ue,aa as Ve,ab as Le,ac as me,ad as Fe,ae as Ge,x as F,af as Be,ag as Ke,ah as G,ai as B,aj as W,K as Ye,S as He,F as qe,G as Qe,H as Xe,J as Ze}from"./listings-BkJHjkUV.js";import{m as k,a as ue,a4 as C,T as xe,S as M,ae as ee,c as se,af as K,Z as O,t as fe,k as $,b as pe,ag as Y,ah as he,aQ as ae,aR as Je,an as We,aS as te,aT as es,aU as ss,L as re,A as as,aA as ts}from"./ui-YP8xOIYG.js";import{a as V}from"./images-C3EucWOq.js";const rs=()=>{const r=ne(),{currentUser:t}=H(),[c]=d.useState(Ee()),[i,o]=d.useState(null),[m,f]=d.useState(null),[u,h]=d.useState(!0),[p,g]=d.useState(null);d.useEffect(()=>{t&&j()},[t]);const j=async()=>{h(!0);try{const[a,n]=await Promise.all([ce(t.id),oe(t.id)]);o(a),f(n)}catch(a){console.error("Error loading user data:",a)}finally{h(!1)}},b=async a=>{t&&(g(a),z({title:"🚧 Ödeme Sistemi Yakında!",description:"Premium üyelik sistemi geliştirme aşamasında. Çok yakında sizlerle! 🚀",duration:5e3}),g(null))},w=a=>a.includes("teklif")?e.jsx(O,{className:"w-4 h-4"}):a.includes("resim")||a.includes("fotoğraf")?e.jsx(fe,{className:"w-4 h-4"}):a.includes("mesaj")?e.jsx($,{className:"w-4 h-4"}):a.includes("öne çıkar")?e.jsx(M,{className:"w-4 h-4"}):a.includes("vitrin")||a.includes("görüntüleme")?e.jsx(pe,{className:"w-4 h-4"}):a.includes("dosya")?e.jsx(Y,{className:"w-4 h-4"}):a.includes("AI")||a.includes("Yapay")?e.jsx(K,{className:"w-4 h-4"}):a.includes("destek")?e.jsx(ee,{className:"w-4 h-4"}):a.includes("kurumsal")||a.includes("rozet")?e.jsx(he,{className:"w-4 h-4"}):e.jsx(se,{className:"w-4 h-4"}),N=()=>i?.plan_slug||"basic",s=a=>N()===a,l=a=>{const n=N(),x=["basic","advanced","corporate"];return x.indexOf(a)>x.indexOf(n)};return u?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary"})}):e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>r(-1),className:"mr-4 text-muted-foreground hover:text-foreground",children:e.jsx(ue,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-7 h-7 mr-3 text-yellow-400"}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:"Premium Planlar"})]})]}),e.jsxs("div",{className:"glass-effect rounded-2xl p-8",children:[e.jsx("p",{className:"text-center text-muted-foreground mb-8",children:"Daha fazla özellik ve sınırsız kullanım için Premium'a geçin"}),m&&e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 bg-muted/50 rounded-lg mb-6",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-primary"}),"Bu Ay Kullanımınız"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Teklifler:"}),e.jsx("span",{className:"ml-2 font-semibold",children:m.offers_count||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Mesajlar:"}),e.jsx("span",{className:"ml-2 font-semibold",children:m.messages_count||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Öne Çıkan:"}),e.jsx("span",{className:"ml-2 font-semibold",children:m.featured_offers_count||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),e.jsx("span",{className:"ml-2 font-semibold",children:i?.plan_name||"Temel Plan"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:Object.entries(c).map(([a,n],x)=>e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},children:e.jsxs(P,{className:`relative h-full ${n.popular?"border-2 border-primary shadow-lg":s(a)?"border-2 border-green-500":"border border-border"}`,children:[n.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx(D,{className:"bg-primary text-primary-foreground px-3 py-1",children:"Önerilen"})}),s(a)&&e.jsx("div",{className:"absolute -top-3 right-4",children:e.jsx(D,{className:"bg-green-500 text-white px-3 py-1",children:"Mevcut Plan"})}),e.jsxs(_,{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold mb-2 flex items-center justify-center gap-2",children:[a==="corporate"&&e.jsx(C,{className:"w-5 h-5 text-yellow-400"}),a==="advanced"&&e.jsx(M,{className:"w-5 h-5 text-blue-400"}),a==="basic"&&e.jsx(ee,{className:"w-5 h-5 text-gray-400"}),n.name]}),e.jsx("div",{className:"mb-4",children:n.price===0?e.jsx("span",{className:"text-2xl font-bold text-green-500",children:"Ücretsiz"}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-3xl font-bold",children:["₺",n.price]}),e.jsxs("span",{className:"text-muted-foreground",children:["/",n.period]})]})})]}),e.jsx("ul",{className:"space-y-3 mb-6",children:n.features.map((v,y)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx("div",{className:"mt-0.5",children:w(v)}),e.jsx("span",{children:v})]},y))}),e.jsx("div",{className:"mt-auto",children:s(a)?e.jsxs(T,{disabled:!0,className:"w-full",variant:"outline",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Mevcut Planınız"]}):l(a)?e.jsx(T,{onClick:()=>b(a),disabled:p===a,className:"w-full bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70",children:p===a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 mr-2 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Yükseltiliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Planı Seç"]})}):e.jsx(T,{disabled:!0,className:"w-full",variant:"outline",children:"Mevcut Planınızdan Düşük"})})]})]})},a))}),e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"p-4 bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"w-5 h-5 text-blue-400"}),e.jsx("h4",{className:"font-semibold text-blue-400",children:"🎁 Özel Kampanyalar"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• İlk ay %50 indirim"}),e.jsx("li",{children:"• 3 ay premium al, 1 ay hediye"}),e.jsx("li",{children:"• Yıllık üyelikte %20 indirim"}),e.jsx("li",{children:"• İlk teklifin öne çıkarılması ücretsiz"})]})]})]})]})},ks=Object.freeze(Object.defineProperty({__proto__:null,default:rs},Symbol.toStringTag,{value:"Module"}));var q="Progress",Q=100,[is,Ps]=de(q),[ls,ns]=is(q),ge=d.forwardRef((r,t)=>{const{__scopeProgress:c,value:i=null,max:o,getValueLabel:m=cs,...f}=r;(o||o===0)&&!ie(o)&&console.error(os(`${o}`,"Progress"));const u=ie(o)?o:Q;i!==null&&!le(i,u)&&console.error(ds(`${i}`,"Progress"));const h=le(i,u)?i:null,p=E(h)?m(h,u):void 0;return e.jsx(ls,{scope:c,value:h,max:u,children:e.jsx(A.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":E(h)?h:void 0,"aria-valuetext":p,role:"progressbar","data-state":ve(h,u),"data-value":h??void 0,"data-max":u,...f,ref:t})})});ge.displayName=q;var je="ProgressIndicator",be=d.forwardRef((r,t)=>{const{__scopeProgress:c,...i}=r,o=ns(je,c);return e.jsx(A.div,{"data-state":ve(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...i,ref:t})});be.displayName=je;function cs(r,t){return`${Math.round(r/t*100)}%`}function ve(r,t){return r==null?"indeterminate":r===t?"complete":"loading"}function E(r){return typeof r=="number"}function ie(r){return E(r)&&!isNaN(r)&&r>0}function le(r,t){return E(r)&&!isNaN(r)&&r<=t&&r>=0}function os(r,t){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Q}\`.`}function ds(r,t){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Q} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ne=ge,ms=be;const S=U.forwardRef(({className:r,value:t,...c},i)=>e.jsx(Ne,{ref:i,className:V("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...c,children:e.jsx(ms,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));S.displayName=Ne.displayName;var L="Tabs",[us,_s]=de(L,[me]),ye=me(),[xs,X]=us(L),we=d.forwardRef((r,t)=>{const{__scopeTabs:c,value:i,onValueChange:o,defaultValue:m,orientation:f="horizontal",dir:u,activationMode:h="automatic",...p}=r,g=Ue(u),[j,b]=Ve({prop:i,onChange:o,defaultProp:m??"",caller:L});return e.jsx(xs,{scope:c,baseId:Le(),value:j,onValueChange:b,orientation:f,dir:g,activationMode:h,children:e.jsx(A.div,{dir:g,"data-orientation":f,...p,ref:t})})});we.displayName=L;var ke="TabsList",Pe=d.forwardRef((r,t)=>{const{__scopeTabs:c,loop:i=!0,...o}=r,m=X(ke,c),f=ye(c);return e.jsx(Fe,{asChild:!0,...f,orientation:m.orientation,dir:m.dir,loop:i,children:e.jsx(A.div,{role:"tablist","aria-orientation":m.orientation,...o,ref:t})})});Pe.displayName=ke;var _e="TabsTrigger",Te=d.forwardRef((r,t)=>{const{__scopeTabs:c,value:i,disabled:o=!1,...m}=r,f=X(_e,c),u=ye(c),h=De(f.baseId,i),p=Ae(f.baseId,i),g=i===f.value;return e.jsx(Ge,{asChild:!0,...u,focusable:!o,active:g,children:e.jsx(A.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":p,"data-state":g?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:h,...m,ref:t,onMouseDown:F(r.onMouseDown,j=>{!o&&j.button===0&&j.ctrlKey===!1?f.onValueChange(i):j.preventDefault()}),onKeyDown:F(r.onKeyDown,j=>{[" ","Enter"].includes(j.key)&&f.onValueChange(i)}),onFocus:F(r.onFocus,()=>{const j=f.activationMode!=="manual";!g&&!o&&j&&f.onValueChange(i)})})})});Te.displayName=_e;var Se="TabsContent",Ce=d.forwardRef((r,t)=>{const{__scopeTabs:c,value:i,forceMount:o,children:m,...f}=r,u=X(Se,c),h=De(u.baseId,i),p=Ae(u.baseId,i),g=i===u.value,j=d.useRef(g);return d.useEffect(()=>{const b=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(b)},[]),e.jsx(Be,{present:o||g,children:({present:b})=>e.jsx(A.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!b,id:p,tabIndex:0,...f,ref:t,style:{...r.style,animationDuration:j.current?"0s":void 0},children:b&&m})})});Ce.displayName=Se;function De(r,t){return`${r}-trigger-${t}`}function Ae(r,t){return`${r}-content-${t}`}var fs=we,$e=Pe,Re=Te,Ie=Ce;const ps=fs,ze=U.forwardRef(({className:r,...t},c)=>e.jsx($e,{ref:c,className:V("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...t}));ze.displayName=$e.displayName;const R=U.forwardRef(({className:r,...t},c)=>e.jsx(Re,{ref:c,className:V("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...t}));R.displayName=Re.displayName;const I=U.forwardRef(({className:r,...t},c)=>e.jsx(Ie,{ref:c,className:V("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t}));I.displayName=Ie.displayName;const hs=()=>{const{currentUser:r}=H(),[t,c]=d.useState(null),[i,o]=d.useState(null),[m,f]=d.useState(!1),[u,h]=d.useState(!0),[p,g]=d.useState({totalOffers:0,acceptedOffers:0,totalViews:0,responseRate:0,avgResponseTime:0,successRate:0});d.useEffect(()=>{r&&j()},[r]);const j=async()=>{h(!0);try{const[s,l,a]=await Promise.all([ce(r.id),oe(r.id),Ke(r.id)]);c(s),o(l),f(a),g({totalOffers:45,acceptedOffers:12,totalViews:1250,responseRate:85,avgResponseTime:2.5,successRate:26.7})}catch(s){console.error("Error loading dashboard data:",s),z({title:"Veri Yükleme Hatası",description:"Dashboard verileri yüklenirken bir sorun oluştu.",variant:"destructive"})}finally{h(!1)}},b=(s,l)=>l===-1?0:Math.min(s/l*100,100),w=({icon:s,title:l,value:a,subtitle:n,trend:x,trendValue:v,color:y="text-primary"})=>e.jsx(P,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(_,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:l}),e.jsx("p",{className:"text-2xl font-bold",children:a}),n&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n})]}),e.jsx("div",{className:`p-3 rounded-full bg-primary/10 ${y}`,children:e.jsx(s,{className:"w-6 h-6"})})]}),x&&e.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[x==="up"?e.jsx(es,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(ss,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:x==="up"?"text-green-500":"text-red-500",children:[v,"%"]}),e.jsx("span",{className:"text-muted-foreground ml-1",children:"geçen aya göre"})]})]})}),N=({title:s,current:l,limit:a,icon:n,color:x="bg-primary"})=>{const v=b(l,a),y=a===-1;return e.jsx(P,{children:e.jsxs(_,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${x}/10`,children:e.jsx(n,{className:`w-5 h-5 ${x.replace("bg-","text-")}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l," / ",y?"∞":a]})]})]}),y&&e.jsx(D,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white",children:"Sınırsız"})]}),!y&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{value:v,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["%",v.toFixed(1)," kullanıldı"]})]})]})})};return u?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary"})}):m?e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(C,{className:"w-8 h-8 text-yellow-400"}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:"Premium Dashboard"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Premium özelliklerinizi ve performansınızı takip edin"})]}),e.jsx(P,{className:"mb-8 bg-gradient-to-r from-primary/5 to-secondary/5 border-primary/20",children:e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",children:e.jsx(C,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:t?.plan_name||"Premium Plan"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktif üyelik • Sonraki ödeme: 15 Şubat 2024"})]})]}),e.jsx(D,{className:"bg-gradient-to-r from-green-400 to-green-500 text-white px-3 py-1",children:"Aktif"})]})})}),e.jsxs(ps,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ze,{className:"grid w-full grid-cols-4",children:[e.jsx(R,{value:"overview",children:"Genel Bakış"}),e.jsx(R,{value:"usage",children:"Kullanım"}),e.jsx(R,{value:"analytics",children:"Analitik"}),e.jsx(R,{value:"features",children:"Özellikler"})]}),e.jsxs(I,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(w,{icon:O,title:"Toplam Teklif",value:p.totalOffers,subtitle:"Bu ay",trend:"up",trendValue:"12",color:"text-blue-500"}),e.jsx(w,{icon:ae,title:"Kabul Edilen",value:p.acceptedOffers,subtitle:`%${p.successRate} başarı oranı`,trend:"up",trendValue:"8",color:"text-green-500"}),e.jsx(w,{icon:pe,title:"Toplam Görüntülenme",value:p.totalViews.toLocaleString(),subtitle:"Tüm teklifler",trend:"up",trendValue:"15",color:"text-purple-500"}),e.jsx(w,{icon:$,title:"Yanıt Oranı",value:`%${p.responseRate}`,subtitle:`Ort. ${p.avgResponseTime}h yanıt süresi`,trend:"up",trendValue:"5",color:"text-orange-500"})]}),e.jsxs(P,{children:[e.jsx(G,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Son Aktiviteler"]})}),e.jsx(_,{children:e.jsx("div",{className:"space-y-4",children:[{action:"Yeni teklif gönderildi",item:"iPhone 14 Pro",time:"2 saat önce",type:"offer"},{action:"Teklif kabul edildi",item:"MacBook Air M2",time:"5 saat önce",type:"success"},{action:"Mesaj alındı",item:"Samsung Galaxy S23",time:"1 gün önce",type:"message"},{action:"Teklif öne çıkarıldı",item:'iPad Pro 11"',time:"2 gün önce",type:"featured"}].map((s,l)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:`p-2 rounded-full ${s.type==="success"?"bg-green-100 text-green-600":s.type==="featured"?"bg-yellow-100 text-yellow-600":s.type==="message"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:[s.type==="success"&&e.jsx(ae,{className:"w-4 h-4"}),s.type==="featured"&&e.jsx(M,{className:"w-4 h-4"}),s.type==="message"&&e.jsx($,{className:"w-4 h-4"}),s.type==="offer"&&e.jsx(O,{className:"w-4 h-4"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.action}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.item})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.time})]},l))})})]})]}),e.jsx(I,{value:"usage",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(N,{title:"Aylık Teklifler",current:i?.offers_count||0,limit:t?.limits?.offers_per_month||10,icon:O,color:"bg-blue-500"}),e.jsx(N,{title:"Aylık Mesajlar",current:i?.messages_count||0,limit:t?.limits?.messages_per_month||50,icon:$,color:"bg-green-500"}),e.jsx(N,{title:"Öne Çıkan Teklifler",current:i?.featured_offers_count||0,limit:(t?.limits?.featured_offers_per_day||0)*30,icon:M,color:"bg-yellow-500"}),e.jsx(N,{title:"Resim Ekleme",current:t?.limits?.images_per_offer||2,limit:t?.limits?.images_per_offer||2,icon:fe,color:"bg-purple-500"}),e.jsx(N,{title:"Dosya Ekleme",current:t?.limits?.files_per_offer||0,limit:t?.limits?.files_per_offer||0,icon:Y,color:"bg-orange-500"}),e.jsx(N,{title:"Aylık İlanlar",current:i?.listings_count||0,limit:t?.limits?.listings_per_month||3,icon:We,color:"bg-red-500"})]})}),e.jsx(I,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(P,{children:[e.jsx(G,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),"Teklif Performansı"]})}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Gönderilen Teklifler"}),e.jsx("span",{className:"font-semibold",children:p.totalOffers})]}),e.jsx(S,{value:100,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Görüntülenen Teklifler"}),e.jsx("span",{className:"font-semibold",children:Math.round(p.totalOffers*.8)})]}),e.jsx(S,{value:80,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Yanıtlanan Teklifler"}),e.jsx("span",{className:"font-semibold",children:Math.round(p.totalOffers*.4)})]}),e.jsx(S,{value:40,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Kabul Edilen Teklifler"}),e.jsx("span",{className:"font-semibold",children:p.acceptedOffers})]}),e.jsx(S,{value:p.successRate,className:"h-2"})]})})]}),e.jsxs(P,{children:[e.jsx(G,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5"}),"Kategori Dağılımı"]})}),e.jsx(_,{children:e.jsx("div",{className:"space-y-4",children:[{category:"Elektronik",count:18,percentage:40},{category:"Ev & Yaşam",count:12,percentage:27},{category:"Moda",count:8,percentage:18},{category:"Spor",count:4,percentage:9},{category:"Diğer",count:3,percentage:6}].map((s,l)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:s.category}),e.jsxs("span",{className:"font-semibold",children:[s.count," teklif"]})]}),e.jsx(S,{value:s.percentage,className:"h-2"})]},l))})})]})]})}),e.jsx(I,{value:"features",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:M,title:"Öne Çıkarma",description:"Tekliflerinizi öne çıkararak daha fazla görünürlük kazanın",status:"active",usage:`${i?.featured_offers_count||0}/${(t?.limits?.featured_offers_per_day||0)*30}`},{icon:K,title:"AI Teklif Önerileri",description:"Yapay zeka ile optimize edilmiş teklif önerileri alın",status:t?.plan_slug==="corporate"?"active":"locked",usage:"Sınırsız"},{icon:Y,title:"Dosya Ekleme",description:"Tekliflerinize dosya ve döküman ekleyin",status:t?.limits?.files_per_offer>0?"active":"locked",usage:`${t?.limits?.files_per_offer||0} dosya`},{icon:he,title:"Kurumsal Rozet",description:"Güvenilir tedarikçi rozeti ile öne çıkın",status:t?.plan_slug==="corporate"?"active":"locked",usage:"Aktif"},{icon:te,title:"Detaylı Raporlar",description:"Gelişmiş analitik ve performans raporları",status:t?.plan_slug==="corporate"?"active":"locked",usage:"Haftalık"},{icon:$,title:"Öncelikli Destek",description:"Premium müşteri desteği ve canlı yardım",status:"active",usage:"7/24"}].map((s,l)=>e.jsx(P,{className:`${s.status==="locked"?"opacity-60":""}`,children:e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.status==="active"?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:e.jsx(s.icon,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx(D,{variant:s.status==="active"?"default":"secondary",children:s.status==="active"?"Aktif":"Kilitli"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsxs("p",{className:"text-xs font-medium",children:["Kullanım: ",s.usage]})]})]})})},l))})})]})]}):e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"w-16 h-16 mx-auto text-yellow-400 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Premium Dashboard"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Bu özellik sadece Premium üyeler için kullanılabilir."}),e.jsxs(T,{onClick:()=>window.location.href="/ayarlar/premium",className:"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Premium'a Geç"]})]})})},Ts=Object.freeze(Object.defineProperty({__proto__:null,default:hs},Symbol.toStringTag,{value:"Module"})),gs=()=>{const{listingId:r}=Oe(),t=ne(),{currentUser:c}=H(),[i,o]=d.useState(null),[m,f]=d.useState({}),[u,h]=d.useState(!1),[p,g]=d.useState(!0);d.useEffect(()=>{if(!c||!r)return;(async()=>{g(!0);const{data:l,error:a}=await J.from("listings").select("*").eq("id",r).eq("user_id",c.id).single();if(a||!l){z({title:"İlan Bulunamadı",description:"Doping yapılacak ilan bulunamadı.",variant:"destructive"}),t(-1);return}o(l);const n={};W.forEach(x=>{if(l[x.db_field]){const v=x.prices[0];n[x.id]={...x,selectedPrice:v}}}),f(n),g(!1)})()},[c,r,t]);const j=(s,l)=>{f(a=>{const n={...a};return s?n[l.id]={...l,selectedPrice:l.prices[0]}:delete n[l.id],n})},b=(s,l)=>{const[a,n]=l.split("-").map(Number);f(x=>{const v={...x},y=v[s];if(y){const Me=y.prices.find(Z=>Z.duration===a&&Z.price===n);y.selectedPrice=Me}return v})},w=d.useMemo(()=>Object.values(m).reduce((s,l)=>s+(l.selectedPrice?.price||0),0),[m]),N=async()=>{if(!i||u)return;h(!0);const s={},l=new Date;Object.values(m).forEach(a=>{s[a.db_field]=!0;const n=a.selectedPrice.duration;if(n>0){const x=new Date;x.setDate(l.getDate()+n),a.id==="showcase"&&(s.showcase_expires_at=x.toISOString()),a.id==="urgent"&&(s.urgent_expires_at=x.toISOString()),a.id==="featured"&&(s.featured_expires_at=x.toISOString())}a.id==="up_to_date"&&(s.upped_at=l.toISOString())});try{const{error:a}=await J.from("listings").update(s).eq("id",i.id);if(a)throw a;z({title:"Doping Başarılı!",description:"İlanınız için seçilen dopingler aktif edildi."}),t("/ilanlarim")}catch(a){console.error("Doping purchase error:",a),z({title:"Hata",description:"Doping güncellenirken bir hata oluştu.",variant:"destructive"})}finally{h(!1)}};return p?e.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[e.jsx(re,{className:"w-8 h-8 animate-spin text-primary mr-3"}),e.jsx("span",{children:"İlan bilgileri yükleniyor..."})]}):i?e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>t(-1),className:"mr-4 text-muted-foreground hover:text-foreground",children:e.jsx(ue,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-2xl font-bold text-gradient",children:"İlan için Doping Seçenekleri"})]}),e.jsxs("div",{className:"glass-effect rounded-2xl p-6",children:[e.jsxs("p",{className:"text-muted-foreground mb-6",children:['"',i.title,'" ilanınızı öne çıkarmak için aşağıdaki dopinglerden bir veya daha fazlasını seçin.']}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:e.jsx(as,{children:W.map(s=>{const l=!!m[s.id],a=s.icon;return e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx("div",{className:`rounded-lg border p-4 transition-all h-full ${l?"border-primary ring-2 ring-primary/50 bg-primary/5":"bg-card"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Ye,{id:s.id,checked:l,onCheckedChange:n=>j(n,s),className:"mt-1 h-5 w-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(a,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:s.id,className:"font-semibold text-lg text-foreground cursor-pointer",children:s.title}),i[s.db_field]&&e.jsx(D,{variant:"secondary",className:"ml-2",children:"Aktif"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:s.description}),l&&e.jsx(k.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:e.jsxs(He,{value:`${m[s.id].selectedPrice.duration}-${m[s.id].selectedPrice.price}`,onValueChange:n=>b(s.id,n),children:[e.jsx(qe,{className:"bg-input border-border",children:e.jsx(Qe,{})}),e.jsx(Xe,{children:s.prices.map((n,x)=>e.jsx(Ze,{value:`${n.duration}-${n.price}`,children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("span",{children:n.label}),e.jsxs("span",{className:"font-bold text-primary",children:[n.price," TL"]})]})},x))})]})})]})]})})},s.id)})})}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-border/50",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Toplam Tutar:"}),e.jsxs("span",{className:"text-2xl font-bold text-primary ml-2",children:[w," TL"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(T,{variant:"outline",onClick:()=>t(-1),children:"İptal"}),e.jsxs(T,{onClick:N,className:"btn-primary",disabled:w===0||u,children:[u?e.jsx(re,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(ts,{className:"w-5 h-5 mr-2"}),u?"İşleniyor...":"Satın Al"]})]})]})]})]}):null},Ss=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"}));export{Ss as D,S as P,ps as T,ze as a,R as b,I as c,ks as d,Ts as e};
